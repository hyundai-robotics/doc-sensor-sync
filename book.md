# Hi6 로봇제어기 기능설명서 - 센서 동기(컨베이어, 프레스)

{% hint style="warning" %}
본 제품 설명서에서 제공되는 정보는 현대로보틱스의 자산입니다.

현대로보틱스의 서면에 의한 동의 없이 전부 또는 일부를 무단 전재 및 재배포할 수 없으며, 제3자에게 제공되거나 다른 목적에 사용할 수 없습니다.



본 설명서는 사전 예고 없이 변경될 수 있습니다.



**Copyright ⓒ 2020 by Hyundai Robotics**
{% endhint %}
# 1. 개요

센서 동기는 외부의 센서 신호를 받아서 동기를 수행하는 기능입니다. 외부 센서는 엔코더를 지원하며 컨베이어와 프레스 작업으로 분류됩니다.

컨베이어 동기 기능은 컨베이어에 탑재되어 이동하는 작업물에 대해서 로봇이 컨베이어를 추종하면서 작업하는 것입니다.

프레스 동기 기능은 프레스의 이동 거리에 대해 로봇의 위치를 연동하여 제어하는 방식입니다.
# 1.1 시스템 구성

컨베이어 동기 시스템의 일반적인 구성 형태는 아래의 그림과 같습니다.

![](../_assets/image9.png)

*   <mark style="color:green;">**리밋스위치**</mark>

    작업물의 컨베이어상의 특정 위치 진입 여부와 프레스가 특정 위치를 지나가고 있음을 제어기에게 알려주는 장치입니다. 리밋스위치가 있는 위치가 위치 판단의 기준점이 됩니다.

    &#x20;
*   <mark style="color:green;">**엔코더**</mark>

    모터 구동부에는 모터의 회전량에 해당되는 펄스를 발생시키는 엔코더가 장착되어 있습니다. 엔코더는 로봇 제어기와 접속되고, 엔코더에서 출력되는 펄스가 로봇 제어기에 입력됩니다.
# 1.2 컨베이어 동기 원리

아래의 그림과 같이 컨베이어가 정지한 상태에서 티칭한 궤적 P1\~P7(P2\~P6 은 컨베이어 동기)을 재생시에는 컨베이어에 탑재되어 이동하는 작업물에 대해서 리밋스위치로부터 작업물이 이동한 양을 구한 후 기준(티칭) 위치에 그 양을 가산하여 재생합니다. 이를 위해서는 변동하는 컨베이어 속도에 로봇이 동기하여야 하며 작업물과 툴 간의 상대적인 위치 및 자세를 유지해야 합니다.

![](../_assets/image10.png)
# 1.3 프레스 동기 원리

프레스는 정점에서부터 하강하여 최저점까지 이동하면서 프레스 작업을 수행합니다. 그 이후에 다시 상승하여 정점으로 이동함으로써 하나의 사이클을 이룹니다. 프레스 동기는 프레스의 위치와 로봇의 위치를 스텝 데이터에 기록함으로써 프레스의 이동 속도에 따라 로봇의 위치를 동기화 시키는 것입니다. 단 동기 성능은 로봇의 가감속, 최고속의 성능에 제한되며 프레스의 예상속도 대비 변동이 큰 경우 오차가 발생할 수 있습니다.

![](../_assets/image11.png)
# 1.4 주요 사양

|         **항목**        |         **사양**        |
| :-------------------: | :-------------------: |
| 동기 가능한 센서(컨베이어,프레스) 수 |           2대          |
|      컨베이어(프레스) 형태     |         직선, 원형        |
|       컨베이어 각도 설정      |      자동 설정 방식 지원      |
|        펄스 입력 방식       |     오픈컬렉터, 라인드라이브     |
|       펄스 카운팅 방식       |        Up/Down        |
|       엔코더 분해능 설정      |      자동 설정 방식 지원      |
|   컨베이어 복수 작업물 허용 개수   |      100개(컨베이어당)      |
|    동기 가능한 센서 이동 거리    |          21m          |
|   컨베이어 동기 구간내 보간 방법   |      직선(L), 원호(C)     |
|    프레스 동기 구간내 보간 방법   | 축 보간(P), 직선(L), 원호(C) |
# 1.5 조작 순서

![](../_assets/image12.png)
# 2. 시스템 구성 및 접속

컨베이어 동기를 사용하기 위한 시스템 구성은 하기와 같습니다.

![](../_assets/image15.png)
# 2.1 컨베이어 I/F 보드

# 2.1.1 지원 모듈

당사에서 지원하는 컨베이어 I/F 보드의 구성은 하기와 같으며 각각에 대해서는 별도의 설명서를 참고하시기 바랍니다.

*   <mark style="color:green;">**M5112**</mark>

    크레비스사에서 제공하는 FnIO 모듈로 Network Adapter와 Power Module과 결합하여 사용하십시오. (설명서 : \[Spec] M5112(Rev 1.00).pdf)
# 2.1.2 PLC 프로그램

컨베이어 I/F 보드에서 입력되는 엔코더 펄스는 내장 PLC를 통해 전달할 수 있습니다. 하기는 하나의 예제로 현장에 구성된 시스템에 맞게 조정하여 사용하십시오.

{% hint style="warning" %}
<mark style="color:red;">엔코더에서 입력되는 펄스 값을 기준으로 로봇이 이동하기 때문에 펄스 값을 읽는 주기가 일정해야 로봇의 추종 성능이 좋습니다. 따라서 PLC 로직은 5 ms  의 cyclic task 에서 수행하고 I/O configuration 을 구성할 때도 지정된 5 ms 의 task 로직에서 수행되도록 하십시오.</mark>
{% endhint %}

![](../../_assets/image16.png)

* <mark style="color:green;">**I/O configuration**</mark>

![](../../_assets/image17.png)

![](../../_assets/image18.png)

* <mark style="color:green;">**변수 정의**</mark>

![](../../_assets/image19.png)

*   <mark style="color:green;">**로직 작성**</mark>

    하기 작성된 로직은 5 ms cyclic Tasks 에서 실행되도록 하십시오.

```

ch0_pulse := ch0_counter;
ch0_limit_switch := ch0_di;
ch0_output := ch0_mode;
ch0_output.X4 := ch0_do;

```

*   I/O 카드에서 읽은 펄스카운터를 Hi6 DO(%QW10)에 write 합니다.&#x20;

    (여기서는 **\[설정 > 응용 파라미터 > 센서 동기 파라미터 설정]** 에서 “**펄스카운터 입력(16bit)**”를 di80 \~ di95 으로 설정하였다고 가정)
*   I/O 카드에서 읽은 리밋스위치 입력 상태를 Hi6 DO(%QX0.2)에 write 합니다.

    (여기서는 **\[설정 > 응용 파라미터 > 센서 동기 파라미터 설정]** 에서 “**리밋스위치 입력**”를 3 으로 설정하였다고 가정)
# 2.2 하드웨어 점검

**\[모니터링 > 센서 동기]**를 선택하면 선세 동기 관련 데이터를 확인할 수 있습니다.

![](../_assets/image21.png)

*   <mark style="color:green;">**리밋스위치**</mark>

    “**리밋스위치 입력**” 항목은 리밋스위치가 동작중이면 1, 동작하지 않으면 0 으로 표시되면 정상입니다. 정상 동작하지 않으면 하드웨어를 점검하십시오.
*   <mark style="color:green;">**엔코더**</mark>

    “**raw 펄스”** 항목은 엔코더 펄스가 정상적으로 입력되면 컨베이어 동작 시 0 \~ ffff 범위에서 값이 계속 증가하거나 계속 감소합니다. 정상 동작하지 않으면 하드웨어를 점검하십시오.
# 3. 사용자 인터페이스

# 3.1 컨베이어 각도 자동설정

진행하는 컨베이어에 대해 로봇이 동기하기 위해서는 컨베이어가 로봇 좌표계 내에서 어떠한 방향으로 이동하는지 로봇 제어기가 알고 있어야 합니다.

컨베이어의 방향이 임의로 놓여있는 경우 3 차원 공간상에서 컨베이어가 진행하는 위치를 정확하게 측정하는 것은 상당한 시간을 필요로 하며, 이 경우 컨베이어의 각도 자동 계산 기능을 사용합니다.
# 3.1.1 프로그램 티칭

컨베이어 각도 자동게산을 위해서 먼저 자동 계산을 위한 프로그램을 다음과 같은 방법으로 작성합니다.

{% hint style="info" %}
컨베이어 형태가 원형인 경우 각도를 계산하기 위해서는 3 점의 위치가 필요합니다.

아래에서 3 의 과정을 한번더 해주십시오.

각도를 정확하게 설정하기 위해서는 각각의 위치를 가능한 멀게 하십시오. (직선 1 m 이상)
{% endhint %}

1\. 컨베이어 각도 자동계산을 위한 새로운 프로그램을 선택합니다.

2\. 컨베이어 상의 작업물에 대한 특정 위치로 로봇의 툴 끝을 이동한 후 S1을 기록합니다.

!['](../../_assets/image22.png)

3\. 컨베이어를 구동하여 작업물을 이동한 후 (2)의 특정위치로 로봇의 툴 끝을 이동한 후 S2를 기록합니다.

![](../../_assets/image23.png)

4\. 다음의 프로그램이 작성됩니다.

![](../../_assets/image24.png)
# 3.1.2 자동계산 실행

**\[설정 > 응용 파라미터 > 센서 동기]** 화면에서 **\[각도 설정]**을 누르면 다음의 화면이 표시됩니다.

{% hint style="info" %}
컨베이어 형태가 **<원형>**으로 설정된 경우는 원형 컨베이어의 각도 및 중심 설정을 위해 아래의 내용이 변경됩니다.
{% endhint %}

![](../../_assets/image25.png)

1\. 현재 설정된 컨베이어 각도를 확인 및 수동으로 설정할 수 있습니다.

2\. 컨베이어 각도 자동계산을 위해서는 **\[자동계산]**을 누르면 다음의 화면이 표시됩니다. 여기서 티칭된 프로그램 번호를 입력하면 계산 결과가 표시됩니다.

![](../../_assets/image26.png)

3\. **\[OK]**키를 눌러서 설정된 값을 저장합니다.
# 3.2 엔코더 분해능 자동설정

엔코더 분해능이란 컨베이어(프레스)의 형태가 직선인 경우는 컨베이어(프레스)가 1 m 이동한 경우, 원형인 경우는 컨베이어(프레스)가 1 deg 회전한 경우 발생하는 펄스 수를 의미합니다.

엔코더 분해능을 자동으로 계산하기 위해서는 **\[설정 > 응용 파라미터 > 센서 동기]** 화면에서 **\[분해능계산]**을 누릅니다.

![](../_assets/image27.png)

1\. <mark style="color:blue;"></mark> 아래의 그림과 같이 작업물이 리밋스위치를 치고 들어간 후 센서를 지정합니다.

![](../_assets/image28.png)

2\. 위치를 **<1st>**로 선택합니다.

3\. 작업물 위의 특정위치로 로봇의 툴 끝을 이동합니다.

4\. **\[자세지정]**을 누르면 현재 로봇의 위치와 함께 엔코 펄스 값이 기록됩니다.

5\. 아래의 그림과 같이 센서를 구동하여 작업물을 이동합니다. (1 m 이상)

![](../_assets/image29.png)

6\. 위치를 **<2nd>**로 선택합니다.

7\. 3 에서 지정한 특정위치로 로봇의 툴 끝을 이동합니다.

8\. **\[자세지정]**을 누르면 현재 로봇의 위치와 함께 엔코더 펄스 값이 기록됩니다.

9\. **\[분해능계산]**을 누르면 엔코더 분해능을 계산하고 엔코더 분해능 항목에 기록합니다.

　1 \~ 9의 과정을 반복하면 총 4개의 엔코더 분해능을 계산할 수 있습니다.

10\. **\[평균값계산]**을 누르면 기록된 엔코더 분해능들의 평균 값이 계산됩니다.

11\. **\[완료]**를 누르면 평균 값이 엔코더 분해능으로 설정됩니다.
# 3.3 센서 동기 파라미터

컨베이어(프레스) 동기 기능을 적용하여 로봇을 재생시키기 위해서는 로봇 제어기가 동기해야 할 컨베이어(프레스)에 대한 각종 정보를 알고 있어야 하는데, 이 정보는 작업 프로그램을 작성하기 전에 반드시 설정되어야 합니다.

![](../_assets/image30.png)

*   <mark style="color:green;">**컨베이어 형태**</mark>

    아래의 그림을 참고하여 형태를 선택합니다.

![](../_assets/image31.png)

*   <mark style="color:green;">**엔코더 분해능**</mark>

    엔코더 분해능이란 컨베이어 형태가 직선인 경우는 컨베이어가 1 m 이동한 경우, 원형인 경우는 컨베이어가 1 deg 회전한 경우 발생하는 펄스 수 로 정의됩니다.

{% hint style="info" %}
엔코더 분해능을 자동으로 계산하기 위해서는 “[**3.2 엔코더 분해능 자동설정**](3-2-encoder-resolution-auto-set.md)” 부분을 참고하십시오.
{% endhint %}

*   <mark style="color:green;">**컨베이어 허용 속도**</mark>

    비정상적으로 속도가 높을 경우 이를 에러로 처리하기 위한 항목입니다. 사용할 속도를 고려하여 설정하면 제어기는 컨베이어의 속도를 내부적으로 계산하여 그 속도가 설정된 허용속도보다 높은 경우 에를 출력합니다.

{% hint style="info" %}
일반적으로 엔코더 펄스는 평균 값을 중심으로 ripple이 있기 때문에 속도도 평균 값을 기준으로 약간 ripple 이 있습니다. 따라서 이를 고려하여 약간 높은 값을 설정하십시오.
{% endhint %}

*   <mark style="color:green;">**펄스 이상 검출 허용 횟수**</mark>

    펄스가 비정상적으로 입력되는 경우 로봇 제어기는 "**E0019 컨베이어 펄스 허용주파수 초과**" 에러를 출력합니다. 이때 동기 작업중인 작업물의 보호를 위해 펄스 에러가 발생하더라도 로봇이 작업을 계속하도록 하는 경우 설정합니다.

{% hint style="info" %}
예를 들어, 펄스 이상 검출 허용 횟수가 3 으로 설정되면 로봇제어기는 동기 작업중 하나의 작업물에 대해 펄스이상을 3 회까지 검출하더라도 에러를 발생시키지 않고 내부적으로 적당한 펄스 값을 만들어줍니다. 이후 4 번째 펄스 이상이 검출되면 에러를 발생시킵니다. 발생한 펄스 이상 횟수에 대한 정보는 해당 작업물에 대한 재생이 완료될  때 초기화 됩니다.
{% endhint %}

*   <mark style="color:green;">**최대 작업물 허용 개수**</mark>

    로봇이 컨베이어 상의 하나의 작업물에 대해 동기 작업 중 다른 작업물이 리밋스위치를 치고 작업공간 내에 진입했을 때 이에 대한 작업 여부를 설정합니다. 작업물 진입 최대 허용 개수는 100 개까지 가능합니다.


*   <mark style="color:green;">**동기관련 시스템 에러 검출**</mark>

    시스템 설치 미완료 또는 보드 파손등의 원인으로 컨베이어 동기와 관련된 시스템 에러가 발생하여 로봇을 운전준비 ON 시킬 수 없는 경우, 동기작업과 관계없는 동작을 하기위해 컨베이어 동기와 관련된 시스템 에러를 발생시키지 않도록 설정합니다.

| **에러번호** | 　　　　　　　**동기 시스템 에러의 종류** |
| :------: | ------------------------ |
|   E0021  | 컨베이어 허용 속도 초과            |

*   <mark style="color:green;">**동기 리셋 입력**</mark>

    외부 입력 신호에 의해 컨베이어(프레스) 데이터를 클리어 할 수 있습니다. 로봇이 정지상태 일 때 이 신호가 입력되면 센서 관련 각종 데이터(펄스 데이터, 작업물 위치, 이동 속도, 작업물 진입 개수, 동기 재생 상태 등)를 클리어 합니다. 즉, 수동 리셋을 수행한 것과 동일하게 처리됩니다.


*   <mark style="color:green;">**리밋스위치 입력**</mark>

    외부 입력 신호에 의해 리밋스위치 상태를 받을 수 있습니다.


*   <mark style="color:green;">**펄스 카운터 입력**</mark>

    외부 입력 신호에 의해 엔코더 펄스 카운터를 수신할 수 있습니다. 펄스 카운터는 제어기 내부적으로 16 bit 데이터로 관리되기 때문에 1 word (2 byte)의 입력 신호가 사용됩니다. 최하위 비트의 신호 번호를 입력하면 자동으로 16 개의 신호가 지정되어 사용하게 됩니다.

![](../_assets/image32.png)

*   <mark style="color:green;">**컨베이어 동기 ON**</mark>

    출력 신호에 의해 컨베이어 동기 상태를 외부로 전달할 수 있습니다. “**cv.sync start**” 명령문이 실행되어 동기 on 상태가 되면 “**1**”을 출력합니다.
# 3.4 모니터링

**\[모니터링 > 센서 동기]**를 선택하면 센서 동기 관련 데이러를 확인할 수 있습니다.

![](../_assets/image33.png)

*   <mark style="color:green;">**펄스 데이터**</mark>

    작업물이 리밋스위치로부터 카운터 된 펄스 수입니다.


*   <mark style="color:green;">**작업물 위치**</mark>

    작업물이 리밋스위치로부터 이동한 거리입니다.&#x20;

    형태가 **<직선>**인 경우 mm이며 **<원형>**인 경우는 deg의 값입니다.


*   <mark style="color:green;">**이동 속도**</mark>

    컨베이어(프레스)가 진행하는 속도입니다.

    형태가 **<직선>**인 경우 mm/s이며 **<원형>**인 경우는 deg/s의 값입니다.

    &#x20;
*   <mark style="color:green;">**진입 작업물 개수**</mark>

    작업물이 리밋스위치를 치고 진입된 개수입니다.

    &#x20;
*   <mark style="color:green;">**리밋스위치 입력**</mark>

    리밋스위치가 동작중인지 상태를 표시합니다.

    &#x20;
*   &#x20;<mark style="color:green;"></mark> <mark style="color:green;"></mark><mark style="color:green;">**raw 펄스**</mark>

    입력되는 엔코더 펄스의 값을 hex 데이터로 표시합니다. 정상인 경우 0 \~ ffff까지 반복합니다.

    ****
*   <mark style="color:green;">**수동 리셋**</mark>

    센서 관련 각종 데이터(펄스 데이터, 작업물 위치, 이동 속도, 작업물 진입 개수, 동기재생 상태 등)을 수동으로 클리어 합니다.

    &#x20;
*   <mark style="color:green;">**작업물위치 입력**</mark>

    센서 위치값(직선 mm, 원형 deg)을 수동으로 입력합니다.

    &#x20;
*   <mark style="color:green;">**리밋스위치 동작**</mark>

    리밋 스위치를 수동으로 입력할 필요가 있는 경우 사용합니다.
# 3.5 스텝 데이터

센서 동기가 **<유효>**로 설정된 상태에서 **\[기록]** 버튼에 의해 현재 위치를 기록하면 하기와 같이 로봇의 축 위치와 함께 현재 작업물의 위치가 기록됩니다.

로봇은 컨베이어 동기 재생 시 기록된 위치 데이터를 참조하여 이동합니다.

![](../_assets/image34.png)

현재 스텝 위치에서 sync ? 에서 해당 스텝에 기록된 작업물의 위치를 확인하고 수정할 수도 있습니다.

![](../_assets/image35.png)
# 3.6 명령어

*   <mark style="color:green;">**cv.sync (동기 재생)**</mark>

    프로그램 재생 시에 센서 동기를 실행할 구간을 지정합니다.

```
cv.sync <동기여부>
```

| **<동기여부>** | 　　　　　　　　　　　　**내용**            |
| :--------: | ----------------------------- |
|    reset   | 동기 리셋(동기 Off + 컨베이어 데이터 클리어)  |
|    start   | 동기 시작(동기 On)                  |
|    hold    | 동기 일시 중지(동기 Off)              |
|     end    | 동기 종료(동기 Off + 다음 작업물 데이터 로딩) |

<mark style="color:green;">****</mark>

*   <mark style="color:green;">**cv.wait (인터록 대기)**</mark>

    다음의 그림과 같이 작업물이 리밋스위치로부터 지정된 위치에 도달할 때까지 로봇을 대기할 때 사용합니다.

![<대기거리>](../_assets/image.png)

```
cv.wait posi=<대기거리>,sync=<동기여부>
```

|    ****    | 　　　　　　　　　　　　**내용**                                                                        |
| :--------: | ----------------------------------------------------------------------------------------- |
| **<동기여부>** | <p>대기하는 동안 센서 동기 여부</p><ul><li>0 = 비동기</li><li>1 = 동기 </li><li>*프레스인 경우 비동기만 지원</li></ul> |
| **<대기거리>** | 리밋스위치로부터 작업물 도달 거리                                                                        |

<mark style="color:green;">****</mark>

*   <mark style="color:green;">**cv.input (작업물 진입)**</mark>

    리밋스위치가 동작하여 작업물이 1 개 진입된 것으로 인식하고자 할 때 사용합니다.

```
cv.input
```
# 3.7 함수

*   <mark style="color:green;">**cv.position(<작업물 인덱스>)**</mark> <mark style="color:blue;">\*작업물의 위치를 얻음</mark>

    복수의 작업물이 리밋스위치를 순차적으로 통과한 경우에 각각의 작업물에 대해서 리밋스위치를 기준으로 이동한 거리(mm)를 얻고자 할 때 사용합니다. 작업물 인덱스로 0 이 가장 먼저 진입한 작업물이며, 이는 **** cv.position 과 동일합니다. 이를 기준으로 작업물 인덱스 번호는 진입한 순서에 따라 증가하여 매칭됩니다.

```
if cv.position(0)>1000 then
    print "작업물이 허용 작업 영역을 벗어났습니다."
endif
```

|      ****     | 　　　　　　　　　　　　**내용**                |
| :-----------: | --------------------------------- |
| **<작업물 인덱스>** | 진입한 작업물 순서에 따라 0 부터 순차적으로 증가하여 매칭 |
# 3.8 변수

*   <mark style="color:green;">**cv.speed (컨베이어 속도)**</mark>

    컨베이어나 프레스의 이동 속도를 읽을 때 사용되며 모니터링 상의 이동속도에 해당하는 값입니다.

```
if cv.speed>300 then
    print "컨베이어 속도가 너무 큽니다."
endif
```

*   <mark style="color:green;">**cv.pulse (작업물 펄스)**</mark>

    동기 작업을 위해 작업물이 리밋스위치로부터 이동한 펄스(pulse)를 인식하고자 할 때 사용되며 모니터링 상의 펄스 데이터에 해당하는 값입니다.

```
if cv,pulse>10000 then
    print "작업물이 허용 작업 영역을 벗어났습니다."
endif
```

* <mark style="color:green;">**cv.position (작업물 위치)**</mark>

```
if cv.position>1000 then
    print "작업물이 허용 작업 영역을 벗어났습니다."
endif
```

*   <mark style="color:green;">**cv.work\_no (진입한 작업물 개수)**</mark>

    리밋스위치를 통과하여 컨베이어상에 진입한 작업물의 개수를 읽을 때 사용되며 모니터링 상의 진입 작업물 개수에 해당하는 값입니다.

```
if cv.work_no>30 then
    print "진입 작업물 개수를 초과하습니다."
endif
```

*   <mark style="color:green;">**cv.raw\_pulse (엔코더 raw pulse)**</mark>

    엔코더로부터 입력된 현재의 pulse 카운터를 읽을 때 사용되며 모니터링 상의 raw pulse 에 해당하는 값입니다.

```
var raw_pulse=cv.raw_pulse
```

*   <mark style="color:green;">**cv.resolution (엔코더 분해능)**</mark>

    사용자가 설정한 엔코더 분해능을 읽을 때 사용합니다.

```
var resolution=cv.resolution
```
# 4. 티칭

센서 동기용 프로그램을 작성하는 것 또한 일반적인 티칭과 동일합니다. 그러나 센서 동기 재생을 실행하기 위해서는 “[**cv.sync (센서 동기재생)**](../3-user-interface/3-6-command.md)”과 “[**cv.wait (센서 인터록 대기)**](../3-user-interface/3-6-command.md)” 명령어를 사용해야 하는데, 이 명령어들은 티칭이 완료된 프로그램에 대한 재생을 수행하기 전에 기록되어야 합니다.
# 4.1 동기작업 프로그램 구성

*   <mark style="color:green;">**원위치 대기**</mark>

    로봇은 기동명령이 입력되기전까지 원위치에서 대기합니다.


*   <mark style="color:green;">**인터록 대기**</mark>

    로봇은 동기 작업 구간 근처까지 미리 이동한 후, cv.wait 명령어에 기록된 거리에 작업물이 도달하기까지 대기합니다.



    다음 그림은 컨베이어 상에 흘러오는 작업물에 대한 도장작업 프로그램입니다. 로봇은 스텝 4 로 진행할 때 컨베이어 동기를 시작하고 스텝 5 로 이동할 때부터 동기 상태에서 작업물에 도료를 분사합니다. 여기서 인터록 대기 스텝(스텝 3)은 동기작업 구간 진입 스텝(스텝 4) 근처에 기록합니다.

![](<../_assets/image_1.png>)

위 작업을 프로그램으로 작성하면 다음과 같습니다.

```
       global cv
       cv=sync.Sensor(1)
스텝 1                                    // 로봇 원위치
스텝 2
스텝 3                                    // 인터록 대기 스텝
       cv.sync start                      // 컨베이어 동기 시작
       cv.wait posi=500,sync=0            // 컨베이어 인터록 대기
스텝 4                                    // 동기구간 투입 스텝
       do1=1                             // 도료 분사 ON 신호
스텝 5                                   // 동기 작업 첫 번째 스텝
   : 
스텝 9                                   // 동기 작업 마지막 스텝
       do1=0                             // 도료 분사 OFF 신호
       cv.sync end                       // 컨베이어 동기 종료
                                         // 현재 작업에 대한 작업 완료
스텝 10
   : 
스텝 13                                 // 로봇 원위치
       end
```

*   <mark style="color:green;">**동기 재생**</mark>

    그림에서 컨베이어 동기재생 구간은 스텝 4 번부터 스텝 9 번까지를 의미하는데, 이 구간내의 모든 명령은 진행하는 컨베이어에 동기하며 실행합니다.


*   <mark style="color:green;">**원위치 복귀**</mark>

    작업을 끝낸 로봇은 다음 기동명령을 위해 다시 원위치로 복귀합니다.
# 4.2 프레스 동기의 티칭

프레스 동기는 프레스의 속도에 로봇이 동기를 수행합니다. 프레스의 속도는 항상 일정하다고 가정하며 프레스의 속도가 가변될 경우 동기의 성능이 저하됩니다. 현재 운전하고 있는 프레스의 속도는 센서 동기 파라미터 설정에서 “**허용 속도**” 항목에 설정합니다.

다음은 프레스 동기를 사용하는 프로그램의 예입니다.

```
       global press
       press=sync.Sensor(1)
스텝 1
       press.sync start                     // 프레스 동기 시작
       press.wait posi=500,sync=0           // 프레스 인터록 대기
스텝 2 move P,spd=60%                       // 센서 1의 위치 등록
스텝 3 move P,spd=60%                       // 센서 1의 위치 등록
스텝 4 move P,spd=60%                       // 센서 1의 위치 등록
       press.sync end                       // 프레스 동기 종료
스텝 5
       end
```

상기 프로그램에서 스텝 2, 3, 4 에서 센서의 위치 반드시 증가하도록 교시되어야 하며 그렇지 못할 경우에는 다음과 같은 에러가 발생합니다.

#### <mark style="color:green;">E0239 스텝의 센서 위치가 순차적으로 증가하지 않습니다.</mark>

또한 스텝 2, 3, 4 에 기록된 속도는 무시되며 기본적으로 사용자가 지정한 프레스의 허용속도를 기반으로 속도를 계획합니다. 만일 최고속으로 계획하여도 로봇의 성능을 초과하도록 센서와 로봇의 위치를 기록하면 동작중에 다음과 같은 에러가 발생합니다.

#### <mark style="color:green;">E0238 센서 속도를 추종할 수 없습니다.</mark>
# 5. 자주하는 질문

*   <mark style="color:green;">**부가 축의 축 사양이 베이스이고 축 구성이 직동인 경우 컨베이어 동기 동작은 어떻게 이루어지나요?**</mark>

    컨베이어 동기 시 부가 축이 존재하면 먼저 부가 축에 대해 작업물을 추종합니다. 만일 로봇이 소프트리밋, 암 간섭등의 이유로 부가 축으로 추종할 수 없다면 로봇 6 축을 사용하여 작업물을 추종합니다.


*   <mark style="color:green;">**B 축의 각도가 0 도 부근에서 컨베이어 동기 동작은 어떤가요?**</mark>

    컨베이어 동기 중에 B 축의 각도가 0 도 부근을 지나는 경우에 로봇은 툴의 자세를 일정하게 유지할 수 없습니다. 따라서 툴을 취부할 단계에서 미리 B 축 각도 0도 부근을 사용하지 않는 툴의 방향을 선택하도록 합니다.


*   <mark style="color:green;">**리밋스위치를 수동으로 입력하고 싶은데 어떻게 하나요?**</mark>

    센서 동기 모니터링에서 **\[리밋스위치 동작]** 버튼을 사용하십시오.


*   <mark style="color:green;">**현재 컨베이어(프레스) 데이터를 수동으로 초기화하고 싶은데 어떻게 하나요?**</mark>

    센서 동기 모니터링에서 **\[수동 리셋]** 버튼을 사용하십시오.&#x20;
